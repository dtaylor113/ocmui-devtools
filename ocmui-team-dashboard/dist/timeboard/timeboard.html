<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OCMUI Team Timeboard</title>
  <style>
    :root { --bg:#0f172a; --muted:#94a3b8; --text:#e5e7eb; --header:#1f2937; --border:#374151; --warn:#fca5a5; }
    html, body {
      margin:0; padding:0; background:var(--bg); color:var(--text);
      width:100%; height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      overflow: hidden;
      box-sizing: border-box;
    }
    header { background:linear-gradient(135deg,#111827,#0b1220); border-bottom:1px solid var(--border); padding:8px 12px; }
    h1 { margin:0; font-size:14px; }
    .controls {
      display:grid; grid-template-columns:1fr auto auto auto auto; gap:6px; align-items:center; margin-top:6px;
    }
    input[type="search"]{
      background:#0b1220; border:1px solid var(--border); color:var(--text);
      padding:6px 8px; border-radius:8px; outline:none; width:100%; font-size:12px;
    }
    /* keep the rounded group only for the radio buttons */
    .pill {
      display:inline-flex; gap:6px; align-items:center;
      border:1px solid var(--border); border-radius:999px; padding:4px 8px; background:#0b1220; white-space:nowrap; font-size:11px;
    }
    /* time & tz controls now plain (no outer rounded rectangles) */
    .ctrl { display:inline-flex; align-items:center; gap:6px; }
    label[for] { font-size:11px; color: var(--muted); margin-right:0; }
    select {
      background:#0b1220; border:1px solid var(--border); color:var(--text);
      padding:4px 6px; border-radius:6px; font-size:11px;
    }

    main{ 
      padding:8px 12px 12px; 
      height: calc(100vh - 120px); 
      overflow-y: auto; 
      box-sizing: border-box; 
    }
    table{ width:100%; border-collapse:collapse; border:1px solid var(--border); border-radius:8px; overflow:hidden; }
    thead th{ background:var(--header); color:var(--text); font-weight:600; text-align:left; padding:4px 6px; border-bottom:1px solid var(--border); font-size:10px; }
    tbody td{ border-bottom:1px solid var(--border); padding:4px 6px; font-size:11px; color:#e5e7eb; }
    tbody tr:nth-child(odd){ background:#0c1223; }
    tbody tr:nth-child(even){ background:#0b1020; }
    .muted{ color:var(--muted); }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }
    .warn { color: var(--warn); }   /* subtle red for off-hours */
    .badge{ display:inline-flex; align-items:center; gap:4px; font-size:10px; border:1px solid var(--border); border-radius:999px; padding:2px 6px; background:#0b1220; color:var(--muted); }
    footer{ padding-top:6px; color:var(--muted); font-size:11px; }
    .note{ margin-top:6px; }
    
    /* Custom scrollbar styling */
    main::-webkit-scrollbar {
      width: 8px;
    }
    main::-webkit-scrollbar-track {
      background: var(--bg);
    }
    main::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px;
    }
    main::-webkit-scrollbar-thumb:hover {
      background: var(--muted);
    }
    
    /* Management UI styles */
    .manage-btn {
      background: #2563eb;
      border: 1px solid #3b82f6;
      color: white;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .manage-btn:hover {
      background: #1d4ed8;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
    }
    
    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
      max-height: 80%;
      overflow: hidden;
    }
    
    .modal-header {
      background: var(--header);
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-size: 14px;
      font-weight: 600;
      margin: 0;
    }
    
    .close-btn {
      background: none;
      border: none;
      color: var(--text);
      font-size: 18px;
      cursor: pointer;
      padding: 0;
    }
    
    .modal-body {
      padding: 16px;
      max-height: 400px;
      overflow-y: auto;
    }
    
    .member-form {
      display: grid;
      gap: 12px;
      margin-bottom: 16px;
    }
    
    .form-group {
      display: grid;
      gap: 4px;
    }
    
    .form-group label {
      font-size: 11px;
      color: var(--muted);
      font-weight: 600;
    }
    
    .form-group input, .form-group select {
      background: #0b1220;
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px;
      border-radius: 6px;
      font-size: 12px;
    }
    
    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: #2563eb;
    }
    
    .btn-group {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }
    
    .btn {
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      border: 1px solid var(--border);
      transition: all 0.2s ease;
    }
    
    .btn-primary {
      background: #2563eb;
      color: white;
      border-color: #3b82f6;
    }
    
    .btn-primary:hover {
      background: #1d4ed8;
    }
    
    .btn-secondary {
      background: var(--header);
      color: var(--text);
    }
    
    .btn-secondary:hover {
      background: var(--border);
    }
    
    .btn-danger {
      background: #dc2626;
      color: white;
      border-color: #ef4444;
    }
    
    .btn-danger:hover {
      background: #b91c1c;
    }
    
    .members-list {
      border: 1px solid var(--border);
      border-radius: 6px;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .member-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      border-bottom: 1px solid var(--border);
      font-size: 12px;
    }
    
    .member-item:last-child {
      border-bottom: none;
    }
    
    .member-info {
      flex: 1;
    }
    
    .member-name {
      font-weight: 600;
    }
    
    .member-details {
      color: var(--muted);
      font-size: 10px;
    }
    
    .member-actions {
      display: flex;
      gap: 4px;
    }
    
    .btn-small {
      padding: 4px 8px;
      font-size: 10px;
    }
  </style>
</head>
<body>
  <header>
    <h1>OCMUI Team Timeboard</h1>
    <div class="controls">
      <input id="q" type="search" placeholder="Filter by name, role, or timezoneâ€¦" />

      <div class="pill">
        <label><input type="radio" name="refMode" value="now" checked/> Now</label>
        <label><input type="radio" name="refMode" value="ref"/> Reference</label>
      </div>

      <!-- plain controls (no rounded outer wrapper) -->
      <div class="ctrl" id="refTimeWrap" title="Reference time (9amâ€“5pm)">
        <label for="refHour">Time:</label>
        <select id="refHour">
          <option value="9">9:00</option>
          <option value="10">10:00</option>
          <option value="11">11:00</option>
          <option value="12">12:00</option>
          <option value="13">1:00</option>
          <option value="14">2:00</option>
          <option value="15">3:00</option>
          <option value="16">4:00</option>
          <option value="17">5:00</option>
        </select>
      </div>

      <div class="ctrl" id="refTzWrap" title="Reference timezone (from team tzs)">
        <label for="refTz">TZ:</label>
        <select id="refTz"></select>
      </div>
      
      <button id="manageMembersBtn" class="manage-btn" title="Manage Team Members">ðŸ‘¥</button>
    </div>
  </header>

  <main>
    <table id="grid">
      <thead>
        <tr>
          <th style="width:28%;">Name</th>
          <th style="width:16%;">Role</th>
          <th style="width:28%;">IANA TZ</th>
          <th style="width:14%;">Local Time</th>
          <th style="width:14%;">Offset</th>
        </tr>
      </thead>
      <tbody id="rows"></tbody>
    </table>
    <footer id="footNote" class="note"></footer>
  </main>

  <!-- Manage Members Modal -->
  <div id="manageMembersModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Manage Team Members</h2>
        <button class="close-btn" id="closeModal">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Add/Edit Member Form -->
        <div class="member-form">
          <div class="form-group">
            <label for="memberName">Name</label>
            <input type="text" id="memberName" placeholder="Enter name">
          </div>
          <div class="form-group">
            <label for="memberRole">Role</label>
            <input type="text" id="memberRole" placeholder="Enter role">
          </div>
          <div class="form-group">
            <label for="memberLocation">Location</label>
            <input type="text" id="memberLocation" placeholder="Enter location description">
          </div>
          <div class="form-group">
            <label for="memberTimezone">Timezone (IANA)</label>
            <select id="memberTimezone">
              <option value="">Select timezone...</option>
              <option value="America/Los_Angeles">America/Los_Angeles (Pacific)</option>
              <option value="America/Denver">America/Denver (Mountain)</option>
              <option value="America/Chicago">America/Chicago (Central)</option>
              <option value="America/New_York">America/New_York (Eastern)</option>
              <option value="Europe/London">Europe/London (UK)</option>
              <option value="Europe/Amsterdam">Europe/Amsterdam (Netherlands)</option>
              <option value="Europe/Berlin">Europe/Berlin (Germany)</option>
              <option value="Europe/Rome">Europe/Rome (Italy)</option>
              <option value="Europe/Prague">Europe/Prague (Czech Republic)</option>
              <option value="Asia/Jerusalem">Asia/Jerusalem (Israel)</option>
              <option value="Asia/Singapore">Asia/Singapore (Singapore)</option>
              <option value="Asia/Tokyo">Asia/Tokyo (Japan)</option>
              <option value="Australia/Sydney">Australia/Sydney (Australia)</option>
            </select>
          </div>
          <div class="btn-group">
            <button class="btn btn-secondary" id="cancelEdit">Cancel</button>
            <button class="btn btn-primary" id="saveMember">Save</button>
          </div>
        </div>
        
        <!-- Members List -->
        <h3 style="font-size: 12px; margin: 0 0 8px 0; color: var(--muted);">Current Members</h3>
        <div class="members-list" id="membersList">
          <!-- Dynamic content will be inserted here -->
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>
